<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"></link>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></link>
        <title>Facelet Title</title>
    </h:head>

    <style type="text/css">
        body, html {
            line-height: 1.5;
            color: black;
            background: rgb(244,232,204);
            background: linear-gradient(0deg, rgba(244,232,204,1) 40%, rgba(250,192,64,1) 59%, rgba(255,188,53,1) 100%);

        }

        input{
            outline-width: 0;
            background: none;
        }

        .round-photo {
            width:200px;
            height:200px;
            object-fit:cover;
            border-radius:50%;

        }

        .round-photo-icon {
            width:50px;
            height:50px;
            object-fit:cover;
            border-radius:50%;
        }

        .active{
            background-color: #FFD279;
        }

        ::placeholder{
            color: #777;
        };

        #upload_file 
        {
            display: none;
        }

        .btn-primary {
            background-color: gray;
            border-color: white;
            color: white;
            pointer-events: auto;
        }

        .btn {
            -moz-user-select: none;
            border: 1px solid transparent;
            border-radius: 0.25rem;
            display: inline-block;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            padding: 0.375rem 0.75rem;
            text-align: center;
            transition: color 0.15s ease-in-out 0s, background-color 0.15s ease-in-out 0s, border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            vertical-align: middle;
            white-space: nowrap;
        }
    </style>

    <h:body>

        <!-- Valid Data --> 
        <f:metadata>
            <f:viewAction action = "#{User.validUserData('home.xhtml')}"></f:viewAction>
            <f:viewAction action = "#{Profile_Service.updateHousesList(User.username)}"></f:viewAction>
        </f:metadata>

        <!-- Top Bar With Login -->
        <div class="w3-top">
            <div style="background-color: #F5A927" class="w3-bar w3-text-black w3-card-4 w3-animate-top w3-text-white" id="myNavBar">
                <a href="home.xhtml" class="w3-padding-16 w3-bar-item w3-hover-opacity w3-button w3-border-right w3-border-white">Home</a>
                <a class="w3-padding-16 w3-bar-item w3-hover-opacity w3-button">
                    <i class="fa fa-th" style="margin-right: 10px"></i>News</a>
                <a class="w3-padding-16 w3-bar-item w3-hover-opacity w3-button">
                    <i class="fa fa-home" style="margin-right: 10px" aria-hidden="true"></i>Houses</a>
                <a class="w3-padding-16 w3-bar-item w3-hover-opacity w3-button">
                    <i class="fa fa-bookmark" aria-hidden="true" style="margin-right: 10px"></i>About</a>
                <a class="w3-padding-16 w3-bar-item w3-hover-opacity w3-button w3-right">
                    <i class="fa fa-sign-out" style="margin-right: 10px" aria-hidden="true"></i>Logout</a>
                <a class="active w3-padding-16 w3-bar-item w3-hover-opacity w3-button w3-right">
                    <i class="fa fa-user" aria-hidden="true" style="margin-right: 10px"></i>Profile</a>
            </div>
        </div>
        
        <!-- Settings -->
        <div id="title" class="w3-justify w3-container w3-padding-64" style="margin-left: 17%; margin-right: 17%;margin-top: 50px">
            <h:form>
                <h2><i class="fa fa-cog" style="margin-right: 10px;"></i>Settings</h2>
                <hr style=" border-color: black; border: 1.5px solid black" />
                <i class="fa fa-user-o" style="font-size:28px"></i>
                <h:inputText readonly="#{facesContext.renderResponse}" style="width: 30%;display: inline"
                    class="w3-input w3-border-black w3-border-bottom" value="#{User.username}" /> 
                <br/>
                <i class="fa fa-lock" style="margin-top: 25px;margin-right: 6px;font-size:28px"></i>
                <h:inputSecret pt:placeholder="new password" binding="#{password_1}" class="w3-input w3-border-black w3-border-bottom" style="width: 30%;display: inline" />
                <br/>
                <i class="fa fa-lock" style="margin-top: 25px;margin-right: 6px;font-size:28px"></i>
                <h:inputSecret pt:placeholder="confirm new password" binding="#{password_2}" class="w3-input w3-border-black w3-border-bottom" style="width: 30%;display: inline" />
                <br/>
                <i class="fa fa-lock" style="margin-top: 25px;margin-right: 6px;font-size:28px"></i>
                <h:inputSecret pt:placeholder="current password" binding="#{password_curr}" class="w3-input w3-border-black w3-border-bottom" style="width: 30%;display: inline"/>
                <h:commandButton action="#{Profile_Service.changePassword(User.username, password_1.value, password_2.value, password_curr.value)}"
                    style="width: 33%; margin-top: 20px;background-color: #273c4e" 
                    class="w3-button w3-text-white w3-block w3-padding-large w3-round-large" value="Submit"/>
            </h:form>
        </div>
        
        <!-- List Houses -->
        <div id="my-houses" class="w3-justify w3-container w3-padding-64" style="margin-right: 17%; margin-left: 17%;margin-top: 50px;">
            <h2 class="w3-justify"><i class="fa fa-bars" style="margin-right: 10px" aria-hidden="true"></i>My Houses</h2>
            <hr style=" border-color: black; border: 1.5px solid black" />
            <ul style="" class="w3-margin-top w3-ul w3-card-4" >
                <h:form>
                    <ui:repeat value="#{Profile_Service.myHouses}" var="houses">
                        <li class="w3-bar w3-half w3-justify">
                            <img src="images/casa-de-neve.jpg" class="round-photo w3-bar-item" style="width:200px" />
                            <div class="w3-bar-item">
                                <span class="w3-large">#{houses.house.address}</span>
                                <br/>
                                <span>#{houses.house.zip_Code}</span>
                                <br/>
                                <span>#{houses.house.price}</span>
                                <br/>
                                <span>#{houses.house.owner}</span>
                                <br/>
                                <span>#{houses.house.rate}</span>
                                <br/>
                                <p>#{houses.house.properties}</p>
                            </div>
                            <h:commandButton action="#{Profile_Service.deliverHouse(User.username, houses.house.address, houses.house.zip_Code, houses.color)}" style="background-color:#{houses.color}; margin:auto; width: 100%; margin-top: 20px;" 
                                class="w3-button w3-margin-bottom w3-text-white w3-block w3-padding-large w3-round-large" value="#{houses.status}" />
                        </li>
                    </ui:repeat>
                </h:form>
            </ul>
        </div>
        
        
        <!-- Adding House -->
        <div id="my-houses" class="w3-justify w3-container w3-padding-64" style="margin-right: 17%; margin-left: 17%;margin-top: 50px;">
            <h2 class="w3-justify"><i class="fa fa-plus-circle" style="margin-right: 10px" aria-hidden="true"></i>Adding Houses</h2>
            <hr style=" border-color: black; border: 1.5px solid black" />
            <h:form enctype="multipart/form-data">
                <div id="content-div" class="w3-row">
                    <div class="w3-half">
                        Address <h:inputText binding="#{address}" style="width: 100%" class="w3-input w3-border w3-border-black" /><br/>
                        Zip Code<br/><h:inputText binding="#{zip_code}" style="display:inline; width: 15%" class="w3-input w3-border w3-border-black" /> - 
                        <h:inputText binding="#{zip_code2}" style="display:inline; width: 10%" class="w3-input w3-border w3-border-black" />
                        <br/><br/>
                        Lease
                        <br/>
                        <h:inputText binding="#{lease}" style="display:inline;width: 30%" class="w3-input w3-border w3-border-black"/> â‚¬
                        <br/><br/>
                        Features
                        <br/>
                        <h:inputTextarea binding="#{features}" rows="3" cols="40" style="resize:none;height: 200px;width: 100%;background: none;" class="w3-border w3-border-black " />
                        <br/><br/>
                        <label for="upload_file" class="custom-file-upload btn btn-primary"><i class="fa fa-cloud-upload"></i> Image Upload</label>
                        <h:inputFile class="margin" id="upload_file" style="opacity: 0" />
                    </div>
                </div>
                <h:commandButton action="#{Profile_Service.insertNewHouse(User.username, address.value, zip_code.value, zip_code2.value, lease.value, features.value)}" style="background-color: #273c4e;width: 50%;margin-top: 20px" 
                class="w3-button w3-margin-bottom w3-text-white w3-block w3-padding-large w3-round-large" value="Submit"/>
            </h:form>
        </div>
        

        <!-- Footer -->
        <footer class="w3-center w3-padding-32" style="background-color: #273c4e;  margin-top: 100px;">
            <a id="git" style="text-decoration: none;" href="https://github.com/rui-raposo/SD-Project">
                <img class="round-photo-icon" src="images/git-new.png"/>
            </a>
            <a id="w3" style="text-decoration: none;" href="https://www.w3schools.com/css/default.asp">
                <img style="margin-left: 15px;width: 80px; height: 60px" src="images/w3"/>
            </a>
            <img src="images/java-removebg-preview.png" style="margin-right: 20px;width: 80px; height: 60px;"/>
            <img class="round-photo-icon" src="images/netb-removebg-preview.png"/>
        </footer>
    </h:body>
</html>